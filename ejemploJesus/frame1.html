<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escribir Nota</title>
</head>
<body>

    <h2>üìù Escribe una Nota</h2>

    <!-- establecemos un textarea donde escribiremos la nota que vamos a procesar -->
    
    <textarea id="nota" placeholder="Escribe algo..." rows="25" cols="110"></textarea><br>

    <!--con el bot√≥n damos la instrucci√≥n de enviar la nota al otro iframe. Hacemos una llamada a la funci√≥n enviarNota() que es la que procesa el mensaje-->

    <button onclick="enviarNota()">üì® Enviar</button>

    <!-- este es el c√≥digo de JavaScript que permite almacenar en el localStorage las variables nota, fecha y mensaje.-->

    <script>
        function enviarNota() {
            let nota = document.getElementById("nota").value;

            /*La variable nota almacena el valor del textarea con el id="nota", es decir, lo que escribamos en el textarea ser√° la string que se almacenar√° en la variable nota. Esto lo hacemos mediante el m√©todo document.getElementById()*/
            
            let fecha = new Date().toLocaleString();

            /*Almacenamos la fecha (convertida a string) en la varible fecha. Usamos el m√©todo constructor new Date() para crear un objeto Date. El m√©todo .toLocaleString lo aplicamos sobre el objeto Date convirtiendo la fecha y hora en una cadena de texto seg√∫n la configuraci√≥n regional de fecha-hora*/

            let mensaje = `${nota} (üìÖ ${fecha})`;

            /* Las variables nota y fecha se concatenan en una nueva llamada mensaje. Esta variable ser√° la que se env√≠e al iframe2*/
            
            localStorage.setItem("ultimaNota", mensaje); 

            /* L√≠nea de almacenamiento en el localStorage. Con setItem y los par√°metros guardamos la √∫ltima nota en localStorage mediante el sistema de clave-valor. Es decir la clave en este caso ser√≠a la primera parte del par√°metro "ultimaNota" mientras que el valor es la variable mensaje que hemos tratado con anterioridad.*/
            
            window.parent.frames['marco2'].postMessage(mensaje, '*');

            /* Explicaci√≥n de esta l√≠nea. window.parent hace referencia a la ventana actual en la que se est√° ejecutando el scritp. frames[marco2] selecciona el iframe cuyo name=marco2. Lo tenemos en index.html. postMessage es un m√©todo que nos permite enviar mensajes entre ventanas o iframes. mensaje es el contenido que se env√≠a (la variable que hemos definido un poco m√°s arriba). El asterisco indica que el mensaje se enviar√° a cualquier origen (esto puede dar riesgo de seguridad).Se recomienda cambiar '*' por la URL espec√≠fica del destino*/

        }
    </script>
    <!--Esto es un comentario para hacer un commit en GitHub y ver si funciona-->
</body>
</html>
